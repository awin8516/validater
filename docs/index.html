<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>validater-2.0.0</title>
<!-- <link href="../src/style.css" rel="stylesheet"> -->
<script src="jquery.1.11.3.min.js"></script>
<!-- <script src="../src/fun.js"></script>
<script src="../src/validater.js"></script> -->

<script src="../dist/validater.min.js"></script>
<style>
.testform { width:500px;border-collapse: collapse;}
.testform th,.testform td { white-space:nowrap; padding:8px 20px;border: 1px #eee solid;}
.testform th { font-weight:normal; text-align:right;background: #fcfcfc}
</style>
</head>
<body>

<table id="testform" class="testform">
    <tr id="tr_price">
        <th>价格</th>
        <td>
            <div>                
                <input type="text" id="summary-price" class="" autocomplete="off" name="price" placeholder="数字，例如：20" value="" valid-option="{
                    type:'/^(0|[1-9][0-9]{0,9})(\.[0-9]{1,2})?$/',                
                    nullMsg:'请输入,价格！',
                    errorMsg:'输入,有误！',
                    translate :'[100,0]'
                }"> ￥/位
            </div>
        </td>
    </tr>
    <tr>
        <th>email</th>
        <td>
        <span id="titlebox"><input type="text" id="summary-title" autocomplete="off" name="title" placeholder="email" valid-option="{
            type:'email',                
            nullMsg:'请输入email！',
            errorMsg:'输入有误！',
            tips : 'false'
        }"></span>  (不弹提示)
        </td>
    </tr>
    <tr>
        <th>描述</th>
        <td>
        <textarea id="summary-description"  placeholder="撰写250字以内的摘要" valid-option="{
            type:'*',    
            nullMsg:'请撰写250字以内的摘要！',
            errorMsg:'请撰写250字以内的摘要！'
        }"></textarea>
        </td>
    </tr>
    <tr>
        <th>用餐时长</th>
        <td>
        <select id="summary-duration" valid-option="{
            type:'float',                
            nullMsg:'请选择用餐时长！',
            errorMsg:'请选择用餐时长！'
        }">
            <option value="">请选择</option>
            <option value="1">1小时</option>
            <option value="1.5">1.5小时</option>
            <option value="2">2小时</option>
            <option value="2.5">2.5小时</option>
            <option value="3">3小时以上</option>
        </select>
        </td>
    </tr>
    <tr>
        <th>地点</th>
        <td>
        <div id="area" style="display:inline-block">
            <select id="" valid-option="{
                type:'n>0',                
                nullMsg:'请选择省份！',
                errorMsg:'请选择省份！',
                target:'parent'
            }">
                <option value="">请选择</option>
                <option value="1">上海</option>
                <option value="2">北京</option>
                <option value="3">广东</option>
            </select>
            <br><br>
            <select id="" valid-option="{
                type:'n>0',                
                nullMsg:'请选择城市！',
                errorMsg:'请选择城市！',
                target:'parent'
            }">
                <option value="">请选择</option>
                <option value="1">广州市</option>
            </select>
            <br><br>
            <select id="" valid-option="{
                type:'n>0',                
                nullMsg:'请选择区！',
                errorMsg:'请选择区！',
                target:'parent'
            }">
                <option value="">请选择</option>
                <option value="1">白云区</option>
            </select>
        </div>
        </td>
    </tr>
    <tr>
        <th>密码</th>
        <td>
        <input type="password" id="reg-password" placeholder="密码" valid-option="{
            type:'*6-18',                
            nullMsg:'请输入密码！',
            errorMsg:'密码长度为6-18位！'
        }">
        </td>
    </tr>
    <tr>
        <th>确认密码</th>
        <td>
        <input type="password" id="reg-password2" placeholder="确认密码" valid-option="{
            type:'*6-18',                
            nullMsg:'请再次输入密码！',
            errorMsg:'密码长度为6-18位！',
            errorSame:'两次输入不一致！',
            same:'#reg-password'
        }">
        </td>
    </tr>
    <tr>
        <th>人数限制</th>
        <td>
        <span>最小人数</span><br>
        <input type="text" id="summary-limitmin" autocomplete="off" name="title" placeholder="数字，例如：2" valid-option="{
            type:'n>0',                
            nullMsg:'请输入最小人数！',
            errorMsg:'输入有误！',
            errorLess:'必须小于最大人数！',
            less:'#summary-limitmax'
        }"><br><br>
        <span>最大人数</span><br>
        <input type="text" id="summary-limitmax" autocomplete="off" name="title" placeholder="数字，例如：20" valid-option="{
            type:'n>0',                
            nullMsg:'请输入最大人数！',
            errorMsg:'输入有误！',
            errorMore:'必须大于最小人数！',
            more:'#summary-limitmin'
        }">
        </td>
    </tr>
    <tr>
        <th>手机</th>
        <td>
        <input id="mobile" type="text"  autocomplete="off" placeholder="手机号码" valid-option="{
            type:'mobile',                
            nullMsg:'请输入手机号码！',
            errorMsg:'输入有误！'
        }">
        <button id="btn-send-code" >发送验证码</button>
        </td>
    </tr>
    <tr>
        <th>性别</th>
        <td>
            <span id="gender" valid-option="{
                type:'checked',
                nullMsg:'请选择性别！'
            }">
                <input name="gender" type="radio" value="1" autocomplete="off">男
                <input name="gender" type="radio" value="0" autocomplete="off">女
            </span>
        </td>
    </tr>
    <tr>
        <th>爱好</th>
        <td>
            <span valid-option="{
                type:'checked',
                nullMsg:'至少选择一个爱好'
            }">
            <input type="checkbox" autocomplete="off" value="">电影
            <input type="checkbox" autocomplete="off" value="">音乐
            <input type="checkbox" autocomplete="off" value="">美术
            <input type="checkbox" autocomplete="off" value="">舞蹈
        </span>
        </td>
    </tr>
    <tr>
        <th>条款</th>
        <td>
            <input id="term" type="checkbox" autocomplete="off" value="" valid-option="{
                type:'checked',
                nullMsg:'请同意条款！',
                target:'next'
            }"><span>同意条款</span>
        </td>
    </tr>
    <tr>
        <th colspan="2">
            <button id="submit" class="valid-submit">确定</button>
            <button id="btn-price" >点我单独验证价格</button>
            <button id="btn-clear" >点我清除所有弹出气泡</button>
            <button id="btn-ignore" >点我排除“价格”验证</button>
            <button id="btn-reinit" >点我新增选项</button>
        </th>
    </tr>
</table>

<script>
    window.onload = function(){
        var myValidater = new validater('.testform', {
            btnSubmit:'#submit',
            position:'right', 
            async : true,
            onSuccess : function(data){
                console.log(data);
            },
            onError: function(data){
                console.log(data);
            },
            onVerifyEnd: function(data){
                console.log(data);
            }
        });

        var btnPrice = document.getElementById('btn-price');
        var btnClear = document.getElementById('btn-clear');
        var btnIgnore = document.getElementById('btn-ignore');
        var btnReinit = document.getElementById('btn-reinit');
        
        btnPrice.onclick = function(){
            var input = document.getElementById('summary-price');
            myValidater.verify(input, {
                type : 'n6-16',
                tips      : true,//是否弹出提示气泡 @Boolean
                target    : '.testform',//提示泡定位依据 默认是追加在<input>之后； @String id or className | #password | .password | parent | prev | next
                position  : 'right',//提示气泡位置
                translate : [10,30], //x,y偏移量
                addclass  : 'new-pop',//提示气泡增加类名			
                passMsg   : '输入正确....！',//@String
                nullMsg   : '不能为空....！',//@String
                errorMsg  : '输入错误....！'//@String                
            });
        }
        
        btnClear.onclick = function(){
            myValidater.clear();
        }

        btnIgnore.onclick = function(){
            var input = document.getElementById('summary-price');
            myValidater.remove(input);
        }

        btnReinit.onclick = function(){
            $('#tr_price').after('<tr id="tr_price">\
                <th>新加项</th>\
                <td>\
                    <input type="text" id="summary-new" class="" autocomplete="off" name="summary-nes" placeholder="新加项" value="" valid-option="{\
                        type:\'/^(0|[1-9][0-9]{0,9})(\.[0-9]{1,2})?$/\',\
                        nullMsg:\'请输入新加项\',\
                        errorMsg:\'输入新加项有误！\'\
                    }">\
                </td>\
            </tr>');
            var input = document.getElementById('summary-new');
            myValidater.append(input);
        }
    }
    
    

</script>
</body>
</html>
